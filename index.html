<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1要素でカレンダー作り（妥協。なんか合わない。諦め。モームリ）</title>
  <style>
    body {
      margin: 0;
    }
    hr {
      all: initial;
      display: block;
      --Y: 2000;
      --days: 365;
      --size: 50px;
      width: calc(var(--days) * 1px);
      aspect-ratio: 1;
      columns: 1px;
      column-gap: 0;
      overflow: auto;
      scroll-marker-group: before;
      counter-reset: month 1 day;
    }
    hr::before {
      content: '';
      display: block;
      height: 100%;
    }
    ::scroll-marker-group {
      width: fit-content;
      height: calc(1.258 * var(--size) * var(--days) / 7 + 50px);
      display: grid;
      grid-template-columns: repeat(7, var(--size));
      grid-auto-rows: var(--size);
      gap: 20px;
      margin: 20px;
    }
    ::column::scroll-marker {
      --M: calc(mod(var(--H), 12) + 1);
      --counter-style: if(
        style(--M: 2): if(
          style(--is-leap-year(var(--Y)) = 1): d29;
          else: d28;
        );
        style((--M: 4) or (--M: 6) or (--M: 9) or (--M: 11)): d30;
        else: d31;
      );
      white-space: pre;
      content: counter(month, m) '⁄' counter(day, var(--counter-style)) counter(lock, lock) counter(month, m-data) '\A\A';
      display: block;
      height: 1lh;
      overflow: hidden;
      animation: h linear;
      animation-timeline: scroll(self);
      animation-range: -1lh;
      --H: --decode(var(--h));
      --counter-increment: if(
        style(var(--H) > 11): month;
        else:;
      );
      counter-increment: day var(--counter-increment);
      --counter-set: if(style(var(--H) > 11): day 1 lock 1;);
      counter-set: var(--counter-set);
      transform-origin: top;
      scale: 1 calc(var(--size) / 1lh);
      outline: solid;
    }
    @counter-style m {
      system: cyclic;
      symbols: '1' '2' '3' '4' '5' '6' '7' '8' '9' '10' '11' '12';
    }
    @counter-style m-data {
      system: cyclic;
      symbols: '' '\A' '\A\A' '\A\A\A' '\A\A\A\A' '\A\A\A\A\A' '\A\A\A\A\A\A' '\A\A\A\A\A\A\A' '\A\A\A\A\A\A\A\A' '\A\A\A\A\A\A\A\A\A' '\A\A\A\A\A\A\A\A\A\A' '\A\A\A\A\A\A\A\A\A\A\A';
    }
    @counter-style d28 {
      system: extends decimal;
      range: 1 28;
      fallback: next28;
    }
    @counter-style d29 {
      system: extends decimal;
      range: 1 29;
      fallback: next29;
    }
    @counter-style d30 {
      system: extends decimal;
      range: 1 30;
      fallback: next30;
    }
    @counter-style d31 {
      system: extends decimal;
      range: 1 31;
      fallback: next31;
    }
    @counter-style next28 {
      system: extends next;
      range: 29 29;
    }
    @counter-style next29 {
      system: extends next;
      range: 30 30;
    }
    @counter-style next30 {
      system: extends next;
      range: 31 31;
    }
    @counter-style next31 {
      system: extends next;
      range: 32 32;
    }
    @counter-style lock {
      system: extends next;
      range: 1 1;
      fallback: --none;
    }
    @counter-style next {
      system: cyclic;
      symbols: '\A\A\A\A\A\A\A\A\A\A\A\A';
    }
    @counter-style --none {
      system: cyclic;
      symbols: '';
    }
    @function --is-leap-year(--y <integer>) returns <integer> {
      result: if(
        style((mod(var(--y), 400) = 0) or ((mod(var(--y), 4) = 0) and (not (mod(var(--y), 100) = 0)))): 1;
        else: 0;
      );
    }
    @function --decode(--x <number>) returns <integer> {
      result: calc(1 / var(--x) - 2);
    }
    @keyframes h {
      to {
        --h: 1;
      }
    }
    @property --h {
      syntax: "<number>";
      inherits: false;
      initial-value: 0;
    }
    @property --M {
      syntax: "<integer>";
      inherits: false;
      initial-value: 0;
    }
  </style>
</head>
<body>
  <hr>
</body>
</html>